# 前端页面的生命周期


## 从浏览器地址栏输入url后发生了什么？

url组成：

- protocol 协议头
- Host 主机域名或ip
- Port 端口号
- Path 目录路径
- Query 查询参数
- Fragment 片段

进程与线程：

进程就是一个程序运行的实例，操作系统会为进程创建独立的内存，用来存放运行所需的代码和数据；而线程是进程的组成部分，每个进程至少有一个主线程及可能的若干子线程，这些线程由所属的进程进行启动和管理。由于多个线程可以共享操作系统为其所属的同一个进程所分配的资源，所以多线程的并行处理能有效提高程序的运行效率。

多进程浏览器：

- 浏览器主进程：负责菜单栏、标题、文件访问、前进后退以及子进程管理。

- GPU进程：图形绘制

- 插件进程：采用沙箱模式，不能读取敏感数据

- 网络进程：负责网络资源加载

- 渲染进程：为每个标签页窗口开辟一个独立的进程，负责html,css转换为可交互的页面，其中包含多个子线程即js引擎线程、GUI渲染线程、事件触发线程、定时出发线程、异步http线程等，出于安全也放入了沙箱。

1 开启网络请求线程

## 建立http请求

- DNS 解析：将域名转换为真实的ip地址，首先查询浏览器缓存，如果查询到ip就结束否则就会搜索系统自身DNS缓存，如果没有找到就会在host文件中查找
如果还是找不到本地服务器就会迭代根域名服务器、com顶级服务器等最终返回目标服务器ip否则会报错。

- TCP链接：三次握手四次挥手

## 前后端交互

- 请求反向代理服务器

- 后端处理流程：1.首先会有一层统一的验证环节，如跨域验证、安全校验拦截等。如果发现是不符合规则的请求，则直接返回相应的拒绝报文。
  2.首先会有一层统一的验证环节，如跨域验证、安全校验拦截等。如果发现是不符合规则的请求，则直接返回相应的拒绝报文。
- 浏览器缓存:在基于 HTTP 的前后端交互过程中，使用缓存可以使性能得到显著提升。具体的缓存策略分为两种：强缓存和协商缓存。
强缓存就是当浏览器判断出本地缓存未过期时，直接读取本地缓存，无须发起 HTTP 请求，此时状态为：200 from cache.http1.1通过cache-control字段
max-age属性规定过期时长比之前的expires更加准确。协商缓存需要浏览器发送请求判断是否需要缓存若未修改则从缓存中读取状态码为304
具体判断流程通过if-none-match与服务器e-tag匹配判断数据是否发生变化，这样更加准确。

## 关键渲染路径

- 构建对象模型：首先浏览器会通过解析 HTML 和 CSS 文件，来构建 DOM（文档对象模型）和 CSSOM（层叠样式表对象模型），绘制。
